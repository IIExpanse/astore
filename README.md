# Astore
___
## О проекте
REST-сервис абстрактного магазина.<br>
Предоставляет простой функционал по добавлению, получению, обновлению и удалению сущностей клиентов, сотрудников, товаров <br>
и связывающих все перечисленное заказов.

## Использованные технологии и библиотеки
- Java 17
- Maven
- Jackson
- JUnit
- Mockito
- Lombok
- PostgreSQL
- H2
- Mapstruct
- Logback

## Порядок развертывания
Необходимо:

1. Установить Java 17
2. Установить Tomcat
3. Склонировать проект.
4. Установить или настроить БД PostgreSQL (или другую БД, поддерживающую запрос MERGE) в соответствии с настройками в классе ConnectionManager либо изменить их под свою БД.
5. Скомпилировать и собрать проект в архив (используется Maven).
6. Запустить Tomcat и загрузить в контейнер собранный war-архив.

Подключение к БД требуется после запуска и не влияет на тестирование (для тестов поднимается H2).

## API

1. **Клиенты**:

`GET /client?id={id}` — Получение клиента с указанным id.

`GET /client?firstName={firstName}&lastName={lastName}` — Поиск клиентов по указанному имени и фамилии. 
Как минимум один параметр не должен быть пустым. Возвращается список.

`POST /client` — добавление нового клиента (из тела запроса).

`PUT /client` — обновление существующего клиента (из тела запроса, id не может быть null).

`DELETE /client?id={id}` — удаление клиента с указанным id.
___
2. **Сотрудники**:

`GET /employee?id={id}` — Получение сотрудника с указанным id.

`GET /employee?firstName={firstName}&lastName={lastName}` — Поиск сотрудников по указанному имени и фамилии.
Как минимум один параметр не должен быть пустым. Возвращается список

`POST /employee` — добавление нового сотрудника (из тела запроса).

`PUT /employee` — обновление существующего сотрудника (из тела запроса, id не может быть null).

`DELETE /employee?id={id}` — удаление сотрудника с указанным id.
___
3. **Товары**:

`GET /product?id={id}` — Получение товара с указанным id.

`GET /product?title={title}` — Поиск товаров по названию. Возвращается список

`POST /product` — добавление нового товара (из тела запроса).

`PUT /product` — обновление существующего товара (из тела запроса, id не может быть null).

`DELETE /product?id={id}` — удаление товара с указанным id.
___
4. **Заказы**:

`GET /order?id={id}` — Получение заказа с указанным id.

`GET /order?status={status}` — Поиск заказов с указанным статусом. Возвращается список.

`GET /order/products?orderId={orderId}` — Получение списка идентификаторов товаров, 
которые входят в заказ с указанным orderId.

`POST /order` — добавление нового заказа (из тела запроса).

`PUT /order` — обновление существующего заказа (из тела запроса, id не может быть null).

`PUT /order/products?orderId={orderId}&productsIds={productsIds}` — добавление в существующий заказ с указанным orderId 
товаров с указанными productsIds (повторяющийся параметр).

`DELETE /order?id={id}` — удаление заказа с указанным id.